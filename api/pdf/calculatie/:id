const handleStartCalculatie = async () => {
  if (!currentCalculatieId) return

  try {
    setLoading(true)

    const res = await fetch(`/api/pdf/calculatie/${currentCalculatieId}`)
    if (!res.ok) throw new Error("Fout bij genereren PDF")

    const blob = await res.blob()
    const url = window.URL.createObjectURL(blob)

    const a = document.createElement("a")
    a.href = url
    a.download = `calculatie_${currentCalculatieId}.pdf`
    a.click()

    window.URL.revokeObjectURL(url)
  } catch (err) {
    console.error("Fout bij PDF-generatie:", err)
    alert("PDF genereren mislukt")
  } finally {
    setLoading(false)
  }
}
